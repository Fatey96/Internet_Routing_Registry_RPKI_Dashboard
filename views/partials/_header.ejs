<nav class="navbar navbar-expand-md navbar-dark bg-dark" style="padding-left: 20px; padding-right: 20px;">
  <a class="navbar-brand navbar-brand-modified" href="/" style="margin-right: auto; padding-right: 20px;">RPKI ROA Monitor</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarNav">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link" href="/">Home</a>
      </li>
      <li class="nav-item">
        <% if (session && session.userId) { %>
        <a class="nav-link" href="/auth/logout">Logout</a>
        <% } else { %>
        <a class="nav-link" href="/auth/login">Login</a>
        <% } %>
      </li>
    </ul>
    <div class="form-check form-switch dark-mode-toggle" style="padding-left: 20px; margin-left: auto;">
      <input class="form-check-input" type="checkbox" id="darkModeToggle">
      <label class="form-check-label" for="darkModeToggle" id="darkModeToggleLabel"><i class="fas fa-moon"></i> Dark Mode</label>
    </div>
  </div>
</nav>
<script src="https://kit.fontawesome.com/a076d05399.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    const darkModeToggle = document.getElementById('darkModeToggle');
    const darkModeToggleLabel = document.getElementById('darkModeToggleLabel');
    const currentTheme = localStorage.getItem('theme');

    if (currentTheme === 'dark') {
      document.body.classList.add('dark-mode');
      darkModeToggle.checked = true;
      darkModeToggleLabel.innerHTML = '<i class="fas fa-sun"></i> Light Mode';
    }

    darkModeToggle.addEventListener('change', function() {
      if (this.checked) {
        document.body.classList.add('dark-mode');
        localStorage.setItem('theme', 'dark');
        darkModeToggleLabel.innerHTML = '<i class="fas fa-sun"></i> Light Mode';
        console.log('Dark mode enabled');
      } else {
        document.body.classList.remove('dark-mode');
        localStorage.setItem('theme', 'light');
        darkModeToggleLabel.innerHTML = '<i class="fas fa-moon"></i> Dark Mode';
        console.log('Light mode enabled');
      }
    });
  });
</script>